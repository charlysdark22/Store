# üöÄ Gu√≠a de Deploy en Render - Tech Store Cuba

## üìã **Pasos para Desplegar**

### **PASO 1: Preparar el Repositorio**

1. **Crear repositorio en GitHub:**
```bash
git init
git add .
git commit -m "Initial commit - Tech Store Cuba"
git branch -M main
git remote add origin https://github.com/TU_USUARIO/tech-store-cuba.git
git push -u origin main
```

### **PASO 2: Configurar Render**

1. **Ir a [render.com](https://render.com) y crear cuenta**

2. **Crear nuevo Web Service:**
   - Click en "New +" ‚Üí "Web Service"
   - Conectar tu repositorio de GitHub
   - Seleccionar el repositorio `tech-store-cuba`

3. **Configurar el servicio:**
   ```
   Name: tech-store-cuba
   Environment: Node
   Build Command: npm run render-build
   Start Command: npm run render-start
   ```

### **PASO 3: Variables de Entorno**

Agregar estas variables en Render Dashboard:

```env
NODE_ENV=production
PORT=10000
JWT_SECRET=[Auto-generated by Render]
JWT_EXPIRE=30d
MONGODB_URI=[From MongoDB service]
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=tu-email@gmail.com
EMAIL_PASS=tu-app-password-gmail
VAPID_PUBLIC_KEY=BEl62iUYgUivxIkv69yViEuiBIa40HI8j2wcOFgU6-4dDRDjfAEez2lILgKMWWoHVgJhXVfgBGAEbWfKwqsuYaQ
VAPID_PRIVATE_KEY=tUxbIMhfzAB2T4F2Duq2UUqk1SGqc6FpkdCXweKBLUw
FRONTEND_URL=https://tech-store-cuba.onrender.com
```

### **PASO 4: Crear Base de Datos MongoDB**

1. **En Render Dashboard:**
   - Click "New +" ‚Üí "PostgreSQL" ‚Üí Cambiar a "MongoDB"
   - Name: `tech-store-db`
   - Plan: Starter (Free)

2. **Copiar Connection String:**
   - Ir a la base de datos creada
   - Copiar el "External Connection String"
   - Pegarlo en la variable `MONGODB_URI` del Web Service

### **PASO 5: Configurar Email (Gmail)**

1. **Activar 2FA en Gmail**
2. **Generar App Password:**
   - Ir a Google Account Settings
   - Security ‚Üí 2-Step Verification ‚Üí App passwords
   - Generar password para "Mail"
3. **Usar en variables:**
   - `EMAIL_USER`: tu-email@gmail.com
   - `EMAIL_PASS`: app-password-generado

### **PASO 6: Deploy**

1. **Deploy autom√°tico:**
   - Render detectar√° los cambios y empezar√° el build
   - Tiempo estimado: 5-10 minutos

2. **Verificar logs:**
   - Ver logs en tiempo real en Render Dashboard
   - Buscar mensaje: "üöÄ Tech Store Cuba server running"

### **PASO 7: Setup Inicial**

1. **Ejecutar setup de datos:**
```bash
# En Render Shell (opcional)
npm run seed
```

2. **O usar el endpoint de setup:**
   - GET: `https://tu-app.onrender.com/api/setup`

## üîß **Configuraci√≥n Avanzada**

### **Custom Domain (Opcional)**

1. **En Render Dashboard:**
   - Settings ‚Üí Custom Domains
   - Agregar tu dominio: `techstorecuba.com`
   - Configurar DNS seg√∫n instrucciones

### **SSL Certificate**
- Render incluye SSL autom√°tico
- No requiere configuraci√≥n adicional

### **Monitoring**
```javascript
// Health check disponible en:
GET /api/health

// Respuesta:
{
  "status": "OK",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "service": "Tech Store Cuba",
  "version": "1.0.0"
}
```

## üì± **URLs de la Aplicaci√≥n**

- **Frontend**: https://tech-store-cuba.onrender.com
- **API**: https://tech-store-cuba.onrender.com/api
- **Admin**: https://tech-store-cuba.onrender.com/admin
- **Health**: https://tech-store-cuba.onrender.com/api/health

## üîê **Credenciales por Defecto**

**Administrador:**
- Email: `admin@techstorecuba.com`
- Password: `TechStore2024!`

**Cup√≥n de Prueba:**
- C√≥digo: `BIENVENIDO2024`
- Descuento: 15%
- V√°lido para nuevos usuarios

## üõ†Ô∏è **Comandos √ötiles**

### **Logs en tiempo real:**
```bash
# Ver logs de la aplicaci√≥n
render logs -s tech-store-cuba --tail
```

### **Redeploy manual:**
```bash
# Trigger nuevo deploy
render deploy -s tech-store-cuba
```

### **Backup de base de datos:**
```bash
# Exportar datos
mongodump --uri="TU_MONGODB_URI"
```

## üîç **Troubleshooting**

### **Error: Build Failed**
- Verificar `package.json` y dependencias
- Revisar logs de build en Render
- Verificar que `npm run render-build` funcione localmente

### **Error: Database Connection**
- Verificar `MONGODB_URI` en variables de entorno
- Confirmar que MongoDB service est√© activo
- Revisar IP whitelist en MongoDB Atlas (si usas Atlas)

### **Error: 502 Bad Gateway**
- Verificar que la app escuche en puerto correcto (`process.env.PORT`)
- Revisar health check endpoint
- Verificar logs de la aplicaci√≥n

### **Notificaciones Push no funcionan**
- Verificar variables `VAPID_PUBLIC_KEY` y `VAPID_PRIVATE_KEY`
- Confirmar que el dominio sea HTTPS
- Verificar service worker registration

## üìà **Optimizaciones**

### **Performance**
- Render incluye CDN autom√°tico
- Gzip compression habilitado
- Static files cacheados

### **Scaling**
- Plan Starter: 0.1 CPU, 512MB RAM
- Plan Standard: 0.5 CPU, 2GB RAM
- Auto-scaling disponible en planes superiores

### **Backup Strategy**
- Base de datos: Backup autom√°tico cada 24h
- Archivos: Usar persistent disk para uploads
- C√≥digo: Backup autom√°tico en GitHub

## üéâ **¬°Deploy Completado!**

Tu Tech Store Cuba est√° ahora live en Render con:
- ‚úÖ Frontend React optimizado
- ‚úÖ Backend Node.js con todas las APIs
- ‚úÖ Base de datos MongoDB
- ‚úÖ Sistema de emails
- ‚úÖ Notificaciones push
- ‚úÖ Pagos con QR cubanos
- ‚úÖ Panel de administraci√≥n
- ‚úÖ SSL/HTTPS autom√°tico

**¬°Felicidades! Tu tienda online est√° lista para recibir clientes cubanos! üá®üá∫**